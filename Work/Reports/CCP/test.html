<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
  	<meta charset="utf-8">
  	<!-- jQuery -->
	<script type="text/javascript" charset="utf8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});
      
    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);
    
    var chart;
    var data;

    function drawChart() {
      	var jsonData = $.ajax({
          	url: "data/statementcoverage.json",
          	dataType:"json",
          	contentType:"application/x-www-form-urlencoded; charset=UTF-8",
          	async: false
          	}).responseText;
    	// Create our data table out of JSON data loaded from server.
      	data = new google.visualization.DataTable(jsonData);

      	// Set chart options
      	var options = 	{	
      						title: "Code Coverage Statistics",
      						height: 500,
      						vAxes:[
      							{
      								format: '##.##%',
      								maxValue: 1
      							},
      							{
      								baseline: 0.5,
      								baselineColor: 'Green',
									maxValue: 1,
									minValue: 0,
									format: '##.##%'
      							}
      						],
      						series: {
      							3: {
      								targetAxisIndex:1
      							}
      						},
      						hAxis: 	{
      							minTextSpacing:0,
      							textStyle: 	{
      								fontSize:13
      							}
      						}
      					};

      	// Instantiate and draw our chart, passing in some options.
      	chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
      	chart.draw(data, options);

      	google.visualization.events.addListener(chart,'select', selectHandler);
    }

    function selectHandler(){
    	var selection = chart.getSelection();
    	console.log(selection[0].row);
    }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html>